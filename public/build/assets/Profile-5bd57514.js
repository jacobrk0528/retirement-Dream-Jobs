import{A as k}from"./AppLayout-8ac3059a.js";import{S as y}from"./SecondaryButton-ab921200.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";import{i as g,o as n,e as f,a as e,t as a,b as r,w as u,g as m,s as _,f as b,c as p,F as C,x as P}from"./app-f8b8aace.js";import{_ as x}from"./PrimaryButton-6b254522.js";const $={data(){return{showEditProfile:!1,name:this.user.name,email:this.user.email,phone:this.formatPhone(),dob:this.user.dob}},props:{className:{type:String,default:""},user:{type:Object,required:!0},visiting:{type:Boolean}},components:{SecondaryButton:y},methods:{formatPhone(){if(this.user&&this.user.phone){let t=this.user.phone;return`(${t.substring(0,3)}) ${t.substring(3,6)}-${t.substring(6)}`}return""},redirectToProfile(){window.location="/user/profile"},redirectToPassword(){window.location="/user/profile#Password"}}},L={class:"flex justify-center mt-10 my-12 bg-white"},R={class:"w-10/12 my-2"},B={class:"flex sm:flex-col sm:justify-center sm:items-center"},j={class:"flex flex-col justify-center max-w-36"},S={class:"h-auto w-auto img-container"},D=["src","alt"],U={class:"flex flex-col px-6 sm:px-0 sm:items-center"},F={class:"text-2xl text-black"},q={class:"flex mt-auto sm:items-center"},z=e("h6",{class:"mr-2"}," Email: ",-1),T={class:"flex mt-1 sm:items-center"},A=e("h6",{class:"mr-2"}," Phone: ",-1),N={class:"flex mt-1 sm:items-center"},E=e("h6",{class:"mr-2"}," DOB: ",-1),O={class:"flex pt-6 sm:justify-center"};function V(t,s,o,c,i,l){const d=g("SecondaryButton");return n(),f("div",L,[e("div",R,[e("div",B,[e("div",j,[e("div",S,[e("img",{class:"max-h-36 max-w-full",src:t.$page.props.user.profile_photo_url,alt:t.$page.props.user.name},null,8,D)])]),e("div",U,[e("div",null,[e("h4",F,a(i.name),1)]),e("div",q,[z,e("p",null,a(i.email),1)]),e("div",T,[A,e("p",null,a(i.phone),1)]),e("div",N,[E,e("p",null,a(i.dob),1)])])]),e("div",O,[r(d,{class:"mr-4 w-36",onClick:l.redirectToProfile,disabled:o.visiting},{default:u(()=>[m("Edit Profile")]),_:1},8,["onClick","disabled"]),r(d,{class:"w-36",onClick:l.redirectToPassword,disabled:o.visiting},{default:u(()=>[m("Reset Password")]),_:1},8,["onClick","disabled"])])])])}const Q=w($,[["render",V]]),I={data(){return{error:null,file:null}},components:{PrimaryButton:x},methods:{handleFileChange(t){this.file=t.target.files[0],console.log(this.file)},uploadFile(){const t=new FormData;t.append("file",this.file),_.post("/file-upload",t).then(s=>{this.$emit("toggle-resume")}).catch(s=>{console.log(s.response.data.message)})}}},M={class:"bg-white rounded-xl"},G={class:"bg-teal-200 bg-opacity-60 p-6 rounded-xl border-2 border-black"},H={class:"flex flex-col mb-3"},J=e("label",{class:"mb-2",for:"inputFile"},"File (Must be .pdf):",-1),K={class:"flex justify-between mb-3"};function W(t,s,o,c,i,l){const d=g("PrimaryButton");return n(),f("div",M,[e("div",G,[e("form",null,[e("div",H,[J,e("input",{type:"file",name:"file",id:"inputFile",class:"",onChange:s[0]||(s[0]=(...h)=>l.handleFileChange&&l.handleFileChange(...h))},null,32)]),e("div",K,[r(d,{onClick:s[1]||(s[1]=h=>this.$emit(t.toggle-t.resume))},{default:u(()=>[m("Cancel")]),_:1}),r(d,{class:"",onClick:l.uploadFile},{default:u(()=>[m("Upload")]),_:1},8,["onClick"])])])])])}const X=w(I,[["render",W]]),Y={data(){return{buttonLabel:"",statusLabel:"",completionDate:"",showResumeUpload:!1,hasResume:!1}},components:{SecondaryButton:y,PrimaryButton:x,resumeUpload:X},props:{user:{type:Object,required:!0},Label:{type:String,required:!0},name:{type:String,required:!0},visiting:{type:Boolean}},async created(){this.buttonLabel=await this.quizLabel(1),this.statusLabel=this.Label=="Resume"?await this.resumeLabel():await this.quizLabel(2)},methods:{takeQuiz(){window.location.href="/quiz"},toggleResume(){this.showResumeUpload=!this.showResumeUpload},async quizLabel(t){try{const s=await _.get("/quiz-completed");return s.data.completed==!0?(this.completionDate=s.data.completed_at,t==1?"Update":"Completed"):(this.completionDate="-",t==1?"Take":"Incomplete")}catch(s){console.log(s)}},async resumeLabel(){try{const t=await _.get(`/file-uploaded/${this.user.id}`);return t.data.uploaded==!0?(this.completionDate=t.data.uploaded_at,this.hasResume=!0,"Uploaded"):(this.completionDate="-","Incomplete")}catch(t){console.log(t)}},downloadResume(){const t=this.user.id;_.get(`file-download/${t}`,{responseType:"blob"}).then(s=>{const o=window.URL.createObjectURL(s.data),c=document.createElement("a"),i=`${this.user.name}_resume.pdf`;c.href=o,c.setAttribute("download",i),document.body.appendChild(c),c.click(),c.remove()}).catch(s=>{console.log(s)})}}},Z={key:0,class:"fixed top-0 left-0 w-full h-full bg-gray-300 bg-opacity-70"},ee={class:"flex items-center justify-center h-full"},te={class:"flex justify-center my-12"},se={class:"w-10/12"},oe={class:"text-2xl uppercase sm:text-center"},ie={class:"sm:flex"},le=P('<div class="flex sm:block bg-teal-200 bg-opacity-70 justify-evenly items-center h-10 sm:h-auto sm:w-1/2"><div class="w-3/12 sm:w-full text-center"> Name </div><div class="w-3/12 sm:w-full text-center"> Status </div><div class="w-3/12 sm:w-full text-center"> Completion Date </div><div class="w-3/12 sm:w-full text-center"> Action </div></div>',1),ne={class:"flex bg-white justify-evenly items-center h-10 sm:block sm:h-auto sm:w-1/2"},ae={class:"w-3/12 sm:w-full text-center"},ce={class:"w-3/12 sm:w-full text-center"},re={class:"w-3/12 sm:w-full text-center"},ue={class:"flex w-3/12 sm:w-full sm:pt-1 justify-center"},de={key:1,class:"flex justify-center w-5/12"};function me(t,s,o,c,i,l){const d=g("resumeUpload"),h=g("SecondaryButton");return n(),f(C,null,[i.showResumeUpload?(n(),f("div",Z,[e("div",ee,[r(d,{onToggleResume:l.toggleResume},null,8,["onToggleResume"])])])):b("",!0),e("div",te,[e("div",se,[e("h3",oe,a(o.Label),1),e("div",ie,[le,e("div",ne,[e("div",ae,a(o.name),1),e("div",ce,a(i.statusLabel),1),e("div",re,a(i.completionDate),1),e("div",ue,[o.Label=="Quiz"?(n(),p(h,{key:0,onClick:l.takeQuiz,class:"w-5/12 sm:h-4 button",disabled:o.visiting},{default:u(()=>[m(a(i.buttonLabel),1)]),_:1},8,["onClick","disabled"])):b("",!0),o.Label=="Resume"?(n(),f("div",de,[o.visiting?(n(),p(h,{key:1,class:"sm:h-4 button",disabled:!i.hasResume,onClick:l.downloadResume},{default:u(()=>[m("Download")]),_:1},8,["disabled","onClick"])):(n(),p(h,{key:0,onClick:l.toggleResume,class:"sm:h-4 button"},{default:u(()=>[m("Upload")]),_:1},8,["onClick"]))])):b("",!0)])])])])])],64)}const v=w(Y,[["render",me]]);const be={__name:"Profile",props:{user:Object,visitingProfile:Boolean},setup(t){return(s,o)=>(n(),p(k,{Auth:!!s.$page.props.auth.user},{default:u(()=>[r(Q,{user:t.user,visiting:t.visitingProfile},null,8,["user","visiting"]),r(v,{user:t.user,Label:"Quiz",name:"Placement",visiting:t.visitingProfile},null,8,["user","visiting"]),r(v,{user:t.user,Label:"Resume",name:"Resume",visiting:t.visitingProfile},null,8,["user","visiting"])]),_:1},8,["Auth"]))}};export{be as default};
